# Курсовая работа №3


# Цель проекта:

##  Получить данные о компаниях и вакансиях с сайта hh.ru, 
    спроектировать таблицы в БД PostgreSQL и 
    загрузить полученные данные в созданные таблицы.

## Требования к реализации:
Получить данные о работодателях и их вакансиях с сайта hh.ru. Для этого используйте публичный API hh.ru и библиотеку 
requests
.
Выбрать не менее 10 интересных вам компаний, от которых вы будете получать данные о вакансиях по API.
Спроектировать таблицы в БД PostgreSQL для хранения полученных данных о работодателях и их вакансиях. Для работы с БД используйте библиотеку 
psycopg2
.


Реализовать код, который заполняет созданные в БД PostgreSQL таблицы данными о работодателях и их вакансиях.
Создать класс 
DBManager
 для работы с данными в БД.
Класс DBManager
Создайте класс 
DBManager
, который будет подключаться к БД PostgreSQL и иметь следующие методы:

get_companies_and_vacancies_count()
 — получает список всех компаний и количество вакансий у каждой компании.
get_all_vacancies()
 — получает список всех вакансий с указанием названия компании, названия вакансии и зарплаты и ссылки на вакансию.
get_avg_salary()
 — получает среднюю зарплату по вакансиям.
get_vacancies_with_higher_salary()
 — получает список всех вакансий, у которых зарплата выше средней по всем вакансиям.
get_vacancies_with_keyword()
 — получает список всех вакансий, в названии которых содержатся переданные в метод слова, например python.
Класс 
DBManager
 должен использовать библиотеку 
psycopg2
 для работы с БД.


Критерии оценки:

 Общие критерии для проекта

Функциональный код разбит на модули: модуль для взаимодействия с API, модуль для взаимодействия с файлами, модуль для взаимодействия с вакансиями.
Решение выложено на GitHub.
В проекте есть 
.gitignore
.
В коммиты не добавлены игнорируемые файлы.
В проекте есть файл с зависимостями.
Нет грубых нарушений PEP 8 в оформлении кода.
В проекте есть «точка входа» — модуль, запустив который можно получить результат всех реализованных в проекте функциональностей.
Классы соответствуют минимум первым двум принципам SOLID.
Все классы задокументированы.
Все методы классов задокументированы.
Все методы классов типизированы.

 Работа по созданию базы данных и таблиц
Реализован код автоматического создания БД.
Код для создания БД вызывается в основном скрипте программы.
Реализован код для создания таблиц в БД.
Код для создания таблиц в БД вызывается в основном скрипте программы.
Создается таблица для организаций.
Создается таблица для вакансий.
Таблица вакансий связана с таблицей организаций через FK.
Использованы средства скрытия данных для доступа к БД.

 Взаимодействие с базой данных
Реализован класс DBManager.
Реализован метод получения списка всех компаний и количества вакансий у каждой компании.
В методе используется SQL-запрос, выводящий информацию о вакансиях и компаниях через JOIN.
Реализован метод получения списка всех вакансий с указанием названия компании, названия вакансии, зарплаты и ссылки на вакансию.
В методе используется SQL-запрос, выводящий информацию о вакансиях и компаниях через JOIN.
Реализован метод получения средней зарплаты по вакансиям.
В методе используется SQL-запрос, выводящий информацию о средней зарплате через функцию AVG.
Реализован метод получения списка всех вакансий, у которых зарплата выше средней по всем вакансиям.
В методе используется SQL-запрос, выводящий информацию о средней зарплате через фильтрацию WHERE.
Реализован метод получения списка всех вакансий, в названии которых содержатся переданные в метод слова, например python.
В методе используется SQL-запрос, выводящий список всех вакансий, в названии которых содержатся переданные в метод слова через оператор LIKE.


 Заполнение данных
Таблица организаций заполняется 10 записями о компаниях для сбора вакансий.
Таблица вакансий заполняется записями о вакансиях компаний через запросы к hh.ru.

Интерфейс управления
Создана функция взаимодействия с пользователем.
Функция использует экземпляры классов и их методы, реализованные ранее.
Не дублируется функциональность, реализованная в классах.
Интерфейс взаимодействия с пользователем реализован понятным текстом, т. е. в выводе не используются коллекции, только человекочитаемые строки.
Функция взаимодействия с пользователем не перегружена.







## Установка:

- Клонируйте репозиторий: `git clone git@github.com:riga1897/Project02.git`
- Перейдите в папку с проектом `cd Project02`
- Установите зависимости: `pip install -r requirements.txt`

## Настройка окружения

1. Скопируйте файл `.env.sample` в `.env`:
   ```bash
   cp .env.sample .env
   ```

2. Отредактируйте `.env` файл, указав ваши настройки:
   - `SUPERJOB_API_KEY`: Получите токен на https://api.superjob.ru/register/
   - `CACHE_TTL`: Время жизни кэша в секундах (по умолчанию 3600)
   - `LOG_LEVEL`: Уровень логирования (DEBUG, INFO, WARNING, ERROR)

### Получение токена SuperJob

1. Перейдите на https://api.superjob.ru/register/
2. Зарегистрируйтесь или войдите в аккаунт
3. Создайте приложение и получите API ключ
4. Добавьте ключ в `.env` файл

## Тестирование:
### API Модули
- test_base_api.py - Тестирует абстрактный базовый класс API
- test_cached_api.py - Тестирует кэширующий слой для API запросов
- test_get_api.py - Тестирует фабрику для создания API объектов
- test_hh_api.py - Тестирует HeadHunter API клиент
- test_sj_api.py - Тестирует SuperJob API клиент
- test_unified_api.py - Тестирует унифицированный API интерфейс

### Конфигурационные модули
- test_api_config.py - Тестирует общую конфигурацию API
- test_api_config.py - Тестирует общую конфигурацию API
- test_hh_api_config.py - Тестирует конфигурацию HH.ru API
- test_sj_api_config.py - Тестирует конфигурацию SuperJob API
- test_ui_config.py - Тестирует конфигурацию пользовательского интерфейса

### Модели данных
- test_vacancy_models.py - Тестирует модели вакансий и зарплат
- test_abstract.py - Тестирует абстрактные модели

### Парсеры данных
- test_hh_parser.py - Тестирует парсер данных HH.ru
- test_sj_parser.py - Тестирует парсер данных SuperJob

### Пользовательский интерфейс
- test_console_interface.py - Тестирует консольный интерфейс пользователя
- test_vacancy_display_handler.py - Тестирует обработчик отображения вакансий
- test_vacancy_search_handler.py - Тестирует обработчик поиска вакансий
- test_source_selector.py - Тестирует селектор источников данных

### Хранение данных
- test_json_saver.py - Тестирует JSON хранилище вакансий

### Утилиты
- test_base_formatter.py - Тестирует базовый форматтер данных
- test_cache.py - Тестирует систему кэширования
- test_env_loader.py - Тестирует загрузчик переменных окружения
- test_file_handlers.py - Тестирует обработчики файлов
- test_menu_manager.py - Тестирует менеджер меню
t- est_paginator.py - Тестирует пагинатор
- test_salary.py - Тестирует утилиты работы с зарплатами
- test_search_utils.py - Тестирует поисковые утилиты
- test_source_manager.py - Тестирует менеджер источников
- test_ui_helpers.py - Тестирует вспомогательные функции UI
- test_ui_navigation.py - Тестирует навигацию пользовательского интерфейса
- test_vacancy_formatter.py - Тестирует форматтер вакансий
- test_vacancy_operations.py - Тестирует операции над вакансиями

### Основные модули
- test_user_interface.py - Тестирует главный модуль пользовательского интерфейса

