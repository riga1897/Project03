# Настройка версии Python в Replit

## Проблема
Как настроить проект для использования определенной версии Python (например, 3.12.11) в виртуальном окружении, когда системный Python имеет другую версию (например, 3.13.4)?

## Решение
В Replit это решается через комбинацию модулей Python и настройки Poetry.

### Текущее состояние проекта
- **Системный Python**: 3.13.4 (по умолчанию в Replit)
- **Проект использует**: Python 3.12.11 через Poetry
- **Результат**: Poetry автоматически выбирает правильную версию

### Как это работает

#### 1. В `pyproject.toml` указана нужная версия:
```toml
[tool.poetry.dependencies]
python = "^3.12"  # Требует Python 3.12.x
```

#### 2. Poetry автоматически использует правильную версию:
```bash
poetry env info
# Показывает: System Python: 3.12.11 (не системный 3.13.4!)
```

#### 3. Модули Replit обеспечивают доступность нужной версии:
Установлен модуль `python-3.12` через `programming_language_install_tool`

## Пошаговая инструкция для настройки нужной версии Python

### 1. Установите нужный модуль Python
```bash
# Используйте programming_language_install_tool для установки нужной версии
# Например, для Python 3.12:
programming_language_install_tool(programming_languages=["python-3.12"])
```

### 2. Настройте `pyproject.toml`
```toml
[tool.poetry.dependencies]
python = "^3.12"  # Или любая другая нужная версия
```

### 3. Очистите старое окружение и переустановите
```bash
poetry env remove --all  # Удалить все виртуальные окружения
rm -f poetry.lock        # Удалить файл блокировки
poetry install           # Создать новое окружение с нужной версией
```

### 4. Проверьте результат
```bash
poetry env info               # Покажет используемую версию Python
poetry run python --version  # Версия Python в проекте
```

## Доступные версии Python в Replit

- `python-3.8`: Python Tools (v3.8)
- `python-3.9`: Python Tools (v3.9)
- `python-3.10`: Python Tools (v3.10)
- `python-3.11`: Python Tools (v3.11)
- `python-3.12`: Python Tools (v3.12)
- `python-base-3.11`: Базовый Python 3.11 (без дополнительных инструментов)
- `python-base-3.12`: Базовый Python 3.12 (без дополнительных инструментов)
- `python-base-3.13`: Базовый Python 3.13 (без дополнительных инструментов)

## Ключевые моменты

- **Replit использует Nix** для управления версиями Python
- **Poetry автоматически выбирает** правильную версию на основе `pyproject.toml`
- **Модули Python** должны быть установлены через инструменты Replit
- **Системный Python** может отличаться от Python в виртуальном окружении
- **Виртуальное окружение** изолировано и использует указанную в проекте версию

## Проверка корректности настройки

После настройки убедитесь, что:

1. `poetry env info` показывает нужную версию Python
2. `poetry run python --version` возвращает ожидаемую версию
3. Все зависимости устанавливаются без ошибок совместимости
4. Тесты проходят успешно

## Пример успешной конфигурации

```bash
$ python --version
Python 3.13.4

$ poetry env info
Virtualenv
Python:         3.12.11
Implementation: CPython

$ poetry run python --version
Python 3.12.11
```

Благодаря этому подходу проект может работать с Python 3.12.11, несмотря на то что системный Python - это 3.13.4!