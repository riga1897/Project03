~/workspace$ pytest tests/test_13_ui_interfaces_coverage.py
=================================== test session starts ====================================
platform linux -- Python 3.11.13, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/workspace
configfile: pyproject.toml
plugins: cov-6.2.1, mock-3.15.0
collected 28 items                                                                         

tests/test_13_ui_interfaces_coverage.py ...............FFFFFFFFFFFF.                 [100%]

========================================= FAILURES =========================================
_______________ TestVacancyDisplayHandler.test_display_saved_vacancies_empty _______________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyDisplayHandler object at 0x7f84e7b32110>
mock_print = <MagicMock name='print' id='140208795901008'>

    @patch('builtins.print')
    def test_display_saved_vacancies_empty(self, mock_print):
        """Покрытие отображения пустого списка вакансий."""
        mock_storage = Mock()
        mock_storage.load_vacancies.return_value = []
    
        handler = VacancyDisplayHandler(mock_storage)
>       handler.display_saved_vacancies()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'

tests/test_13_ui_interfaces_coverage.py:285: AttributeError
_____________ TestVacancyDisplayHandler.test_display_saved_vacancies_with_data _____________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyDisplayHandler object at 0x7f84e7b326d0>
mock_print = <MagicMock name='print' id='140208795474256'>

    @patch('builtins.print')
    def test_display_saved_vacancies_with_data(self, mock_print):
        """Покрытие отображения вакансий с данными."""
        mock_vacancy = Mock()
        mock_vacancy.title = "Python Developer"
        mock_vacancy.employer = Mock()
        mock_vacancy.employer.name = "Test Company"
        mock_vacancy.salary = None
        mock_vacancy.url = "http://test.com"
    
        mock_storage = Mock()
        mock_storage.load_vacancies.return_value = [mock_vacancy]
    
        handler = VacancyDisplayHandler(mock_storage)
>       handler.display_saved_vacancies()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'

tests/test_13_ui_interfaces_coverage.py:304: AttributeError
_______________ TestVacancyDisplayHandler.test_display_saved_vacancies_error _______________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyDisplayHandler object at 0x7f84e7b32cd0>
mock_print = <MagicMock name='print' id='140208799895312'>

    @patch('builtins.print')
    def test_display_saved_vacancies_error(self, mock_print):
        """Покрытие ошибки при отображении вакансий."""
        mock_storage = Mock()
        mock_storage.load_vacancies.side_effect = Exception("Storage error")
    
        handler = VacancyDisplayHandler(mock_storage)
>       handler.display_saved_vacancies()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'

tests/test_13_ui_interfaces_coverage.py:316: AttributeError
________________ TestVacancySearchHandler.test_vacancy_search_handler_init _________________

self = <tests.test_13_ui_interfaces_coverage.TestVacancySearchHandler object at 0x7f84e7b33510>

    def test_vacancy_search_handler_init(self):
        """Покрытие инициализации обработчика поиска."""
        mock_storage = Mock()
        mock_source_selector = Mock()
    
        handler = VacancySearchHandler(mock_storage, mock_source_selector)
    
>       assert handler.storage is mock_storage
E       AssertionError: assert <Mock id='140208799952080'> is <Mock id='140208799951696'>
E        +  where <Mock id='140208799952080'> = <src.ui_interfaces.vacancy_search_handler.VacancySearchHandler object at 0x7f84e7b72a10>.storage

tests/test_13_ui_interfaces_coverage.py:332: AssertionError
___________________ TestVacancySearchHandler.test_handle_search_success ____________________

self = <tests.test_13_ui_interfaces_coverage.TestVacancySearchHandler object at 0x7f84e7b33ad0>
mock_print = <MagicMock name='print' id='140208795830160'>
mock_input = <MagicMock name='input' id='140208795830288'>

    @patch('builtins.input')
    @patch('builtins.print')
    def test_handle_search_success(self, mock_print, mock_input):
        """Покрытие успешного поиска вакансий."""
        mock_input.side_effect = ["Python developer"]
    
        mock_storage = Mock()
        mock_source_selector = Mock()
        mock_source_selector.select_source.return_value = "hh"
    
        handler = VacancySearchHandler(mock_storage, mock_source_selector)
    
        # Мокаем поиск вакансий
>       with patch.object(handler, '_search_vacancies') as mock_search:

tests/test_13_ui_interfaces_coverage.py:348: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 
/nix/store/7d088dip86hlzri9sk0h78b63yfmx0a0-python3-3.11.13/lib/python3.11/unittest/mock.py:1446: in __enter__
    original, local = self.get_original()
                      ^^^^^^^^^^^^^^^^^^^
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <unittest.mock._patch object at 0x7f84e7704910>

    def get_original(self):
        target = self.getter()
        name = self.attribute
    
        original = DEFAULT
        local = False
    
        try:
            original = target.__dict__[name]
        except (AttributeError, KeyError):
            original = getattr(target, name, DEFAULT)
        else:
            local = True
    
        if name in _builtins and isinstance(target, ModuleType):
            self.create = True
    
        if not self.create and original is DEFAULT:
>           raise AttributeError(
                "%s does not have the attribute %r" % (target, name)
            )
E           AttributeError: <src.ui_interfaces.vacancy_search_handler.VacancySearchHandler object at 0x7f84e773c210> does not have the attribute '_search_vacancies'

/nix/store/7d088dip86hlzri9sk0h78b63yfmx0a0-python3-3.11.13/lib/python3.11/unittest/mock.py:1419: AttributeError
_________________ TestVacancySearchHandler.test_handle_search_empty_query __________________

self = <tests.test_13_ui_interfaces_coverage.TestVacancySearchHandler object at 0x7f84e7b340d0>
mock_print = <MagicMock name='print' id='140208796047440'>
mock_input = <MagicMock name='input' id='140208796053072'>

    @patch('builtins.input')
    @patch('builtins.print')
    def test_handle_search_empty_query(self, mock_print, mock_input):
        """Покрытие пустого поискового запроса."""
        mock_input.return_value = ""
    
        mock_storage = Mock()
        mock_source_selector = Mock()
    
        handler = VacancySearchHandler(mock_storage, mock_source_selector)
>       handler.handle_search()
        ^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'VacancySearchHandler' object has no attribute 'handle_search'

tests/test_13_ui_interfaces_coverage.py:366: AttributeError
________ TestVacancyOperationsCoordinator.test_vacancy_operations_coordinator_init _________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyOperationsCoordinator object at 0x7f84e7b34950>

    def test_vacancy_operations_coordinator_init(self):
        """Покрытие инициализации координатора операций."""
        mock_storage = Mock()
    
>       coordinator = VacancyOperationsCoordinator(mock_storage)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argument: 'storage'

tests/test_13_ui_interfaces_coverage.py:379: TypeError
_____________ TestVacancyOperationsCoordinator.test_coordinate_operations_back _____________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyOperationsCoordinator object at 0x7f84e7b34f10>
mock_print = <MagicMock name='print' id='140208795502480'>
mock_input = <MagicMock name='input' id='140208795515088'>

    @patch('builtins.input')
    @patch('builtins.print')
    def test_coordinate_operations_back(self, mock_print, mock_input):
        """Покрытие возврата в главное меню."""
        mock_input.return_value = "0"
    
        mock_storage = Mock()
>       coordinator = VacancyOperationsCoordinator(mock_storage)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argument: 'storage'

tests/test_13_ui_interfaces_coverage.py:390: TypeError
________ TestVacancyOperationsCoordinator.test_coordinate_operations_invalid_choice ________

self = <tests.test_13_ui_interfaces_coverage.TestVacancyOperationsCoordinator object at 0x7f84e7b354d0>
mock_print = <MagicMock name='print' id='140208795846416'>
mock_input = <MagicMock name='input' id='140208795857616'>

    @patch('builtins.input')
    @patch('builtins.print')
    def test_coordinate_operations_invalid_choice(self, mock_print, mock_input):
        """Покрытие неверного выбора операции."""
        mock_input.side_effect = ["invalid", "0"]
    
        mock_storage = Mock()
>       coordinator = VacancyOperationsCoordinator(mock_storage)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argument: 'storage'

tests/test_13_ui_interfaces_coverage.py:404: TypeError
__________ TestUIInterfacesIntegration.test_user_interface_components_integration __________

self = <tests.test_13_ui_interfaces_coverage.TestUIInterfacesIntegration object at 0x7f84e7b35c10>

    def test_user_interface_components_integration(self):
        """Покрытие интеграции компонентов пользовательского интерфейса."""
        mock_storage = Mock()
        mock_db_manager = Mock()
    
        ui = UserInterface(mock_storage, mock_db_manager)
    
        # Проверяем что все компоненты инициализированы корректно
>       assert isinstance(ui.vacancy_search_handler, VacancySearchHandler)
                          ^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'UserInterface' object has no attribute 'vacancy_search_handler'

tests/test_13_ui_interfaces_coverage.py:423: AttributeError
___________________ TestUIInterfacesIntegration.test_components_creation ___________________

self = <tests.test_13_ui_interfaces_coverage.TestUIInterfacesIntegration object at 0x7f84e7b36210>

    def test_components_creation(self):
        """Покрытие создания отдельных компонентов."""
        mock_storage = Mock()
    
        # Тестируем создание каждого компонента отдельно
        source_selector = SourceSelector()
        display_handler = VacancyDisplayHandler(mock_storage)
        search_handler = VacancySearchHandler(mock_storage, source_selector)
>       operations_coordinator = VacancyOperationsCoordinator(mock_storage)
                                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argument: 'storage'

tests/test_13_ui_interfaces_coverage.py:441: TypeError
_______________ TestUIInterfacesErrorHandling.test_error_handling_in_display _______________

self = <tests.test_13_ui_interfaces_coverage.TestUIInterfacesErrorHandling object at 0x7f84e7b36950>
mock_print = <MagicMock name='print' id='140208795843088'>

    @patch('builtins.print')
    def test_error_handling_in_display(self, mock_print):
        """Покрытие обработки ошибок в отображении."""
        mock_storage = Mock()
        mock_storage.load_vacancies.side_effect = Exception("Storage error")
    
        handler = VacancyDisplayHandler(mock_storage)
    
        # Функция должна обработать ошибку gracefully
>       handler.display_saved_vacancies()
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'

tests/test_13_ui_interfaces_coverage.py:463: AttributeError
================================= short test summary info ==================================
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyDisplayHandler::test_display_saved_vacancies_empty - AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyDisplayHandler::test_display_saved_vacancies_with_data - AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyDisplayHandler::test_display_saved_vacancies_error - AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancySearchHandler::test_vacancy_search_handler_init - AssertionError: assert <Mock id='140208799952080'> is <Mock id='140208799951696'>
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancySearchHandler::test_handle_search_success - AttributeError: <src.ui_interfaces.vacancy_search_handler.VacancySearchHandler object a...
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancySearchHandler::test_handle_search_empty_query - AttributeError: 'VacancySearchHandler' object has no attribute 'handle_search'
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyOperationsCoordinator::test_vacancy_operations_coordinator_init - TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argume...
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyOperationsCoordinator::test_coordinate_operations_back - TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argume...
FAILED tests/test_13_ui_interfaces_coverage.py::TestVacancyOperationsCoordinator::test_coordinate_operations_invalid_choice - TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argume...
FAILED tests/test_13_ui_interfaces_coverage.py::TestUIInterfacesIntegration::test_user_interface_components_integration - AttributeError: 'UserInterface' object has no attribute 'vacancy_search_handler'
FAILED tests/test_13_ui_interfaces_coverage.py::TestUIInterfacesIntegration::test_components_creation - TypeError: VacancyOperationsCoordinator.__init__() missing 1 required positional argume...
FAILED tests/test_13_ui_interfaces_coverage.py::TestUIInterfacesErrorHandling::test_error_handling_in_display - AttributeError: 'VacancyDisplayHandler' object has no attribute 'display_saved_vacancies'
============================== 12 failed, 16 passed in 0.56s ===============================
~/workspace$ 