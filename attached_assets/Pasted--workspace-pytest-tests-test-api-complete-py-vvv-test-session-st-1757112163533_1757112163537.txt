~/workspace$ pytest tests/test_api_complete.py -vvv
=============================== test session starts ================================
platform linux -- Python 3.11.13, pytest-8.4.2, pluggy-1.6.0 -- /nix/store/2lcqw1d28vklbk8ikiwad28iq2smwndv-python-wrapped-0.1.0/bin/python3
cachedir: .pytest_cache
rootdir: /home/runner/workspace
configfile: pyproject.toml
plugins: cov-6.2.1, mock-3.15.0
collected 19 items                                                                 

tests/test_api_complete.py::TestBaseJobAPI::test_base_api_cannot_be_instantiated PASSED [  5%]
tests/test_api_complete.py::TestBaseJobAPI::test_concrete_implementation_works PASSED [ 10%]
tests/test_api_complete.py::TestBaseJobAPI::test_clear_cache PASSED          [ 15%]
tests/test_api_complete.py::TestHeadHunterAPI::test_get_vacancies PASSED     [ 21%]
tests/test_api_complete.py::TestHeadHunterAPI::test_validate_vacancy PASSED  [ 26%]
tests/test_api_complete.py::TestHeadHunterAPI::test_get_vacancies_page PASSED [ 31%]
tests/test_api_complete.py::TestHeadHunterAPI::test_get_empty_response PASSED [ 36%]
tests/test_api_complete.py::TestHeadHunterAPI::test_clear_cache PASSED       [ 42%]
tests/test_api_complete.py::TestSuperJobAPI::test_get_vacancies PASSED       [ 47%]
tests/test_api_complete.py::TestSuperJobAPI::test_validate_vacancy PASSED    [ 52%]
tests/test_api_complete.py::TestUnifiedAPI::test_init PASSED                 [ 57%]
tests/test_api_complete.py::TestUnifiedAPI::test_get_vacancies_from_all_sources FAILED [ 63%]
tests/test_api_complete.py::TestCachedAPI::test_init PASSED                  [ 68%]
tests/test_api_complete.py::TestCachedAPI::test_get_empty_response PASSED    [ 73%]
tests/test_api_complete.py::TestCachedAPI::test_validate_vacancy PASSED      [ 78%]
tests/test_api_complete.py::TestCachedAPI::test_get_vacancies_page PASSED    [ 84%]
tests/test_api_complete.py::TestCachedAPI::test_get_vacancies PASSED         [ 89%]
tests/test_api_complete.py::TestAPIIntegration::test_api_error_handling PASSED [ 94%]
tests/test_api_complete.py::TestAPIIntegration::test_api_response_validation PASSED [100%]

===================================== FAILURES =====================================
________________ TestUnifiedAPI.test_get_vacancies_from_all_sources ________________

self = <tests.test_api_complete.TestUnifiedAPI object at 0x7f8bee760350>
unified_api = <src.api_modules.unified_api.UnifiedAPI object at 0x7f8bedd9b3d0>

    def test_get_vacancies_from_all_sources(self, unified_api):
        """Тест получения вакансий из всех источников"""
        if not API_MODULES_AVAILABLE:
            pytest.skip("API modules not available")
    
        # Мокаем методы получения вакансий
        unified_api.get_hh_vacancies = Mock(return_value=[{"id": "hh1", "source": "hh"}])
        unified_api.get_sj_vacancies = Mock(return_value=[{"id": "sj1", "source": "sj"}])
    
>       result = unified_api.get_vacancies_from_all_sources("Python", sources=["hh", "sj"])
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^

tests/test_api_complete.py:236: 
_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ 

self = <src.api_modules.unified_api.UnifiedAPI object at 0x7f8bedd9b3d0>
query = 'Python', kwargs = {'sources': ['hh', 'sj']}

    def get_vacancies_from_all_sources(self, query: str, **kwargs: dict[str, Any]) -> List[Dict[str, Any]]:
        """Получение вакансий из всех источников"""
>       return self.get_all_vacancies(query, sources=["hh", "sj"], **kwargs)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       TypeError: src.api_modules.unified_api.UnifiedAPI.get_all_vacancies() got multiple values for keyword argument 'sources'

src/api_modules/unified_api.py:362: TypeError
-------------------------------- Captured log setup --------------------------------
WARNING  src.api_modules.sj_api:sj_api.py:55 Используется тестовый API ключ SuperJob.                 Для полной функциональности добавьте реальный ключ                 в переменную окружения SUPERJOB_API_KEY
============================= short test summary info ==============================
FAILED tests/test_api_complete.py::TestUnifiedAPI::test_get_vacancies_from_all_sources - TypeError: src.api_modules.unified_api.UnifiedAPI.get_all_vacancies() got multiple values for keyword argument 'sources'
=========================== 1 failed, 18 passed in 0.20s ===========================
~/workspace$ 