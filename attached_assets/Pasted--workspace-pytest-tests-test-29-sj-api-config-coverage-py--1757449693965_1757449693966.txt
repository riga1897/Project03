~/workspace$ pytest tests/test_29_sj_api_config_coverage.py 
============================================ test session starts =============================================
platform linux -- Python 3.11.13, pytest-8.4.2, pluggy-1.6.0
rootdir: /home/runner/workspace
configfile: pyproject.toml
plugins: cov-6.2.1, mock-3.15.0
collected 41 items                                                                                           

tests/test_29_sj_api_config_coverage.py .....................F...................                      [100%]

================================================== FAILURES ==================================================
_________________________ TestSJAPIConfigGetParams.test_get_params_complex_scenario __________________________

self = <tests.test_29_sj_api_config_coverage.TestSJAPIConfigGetParams object at 0x7f6644905910>
mock_get_env_var = <MagicMock name='get_env_var' id='140077210059600'>

    @patch('src.config.sj_api_config.EnvLoader.get_env_var')
    def test_get_params_complex_scenario(self, mock_get_env_var):
        """Покрытие комплексного сценария get_params"""
        mock_get_env_var.return_value = "true"
    
        custom_params = {
            "salary_from": 100000,
            "catalogues": 33,
            "count": 888  # будет переопределен
        }
    
        config = SJAPIConfig(
            count=300,
            published=7,
            custom_params=custom_params
        )
    
        params = config.get_params(
            count=150,  # финальное переопределение
            page=2,
            town="Екатеринбург",
            only_with_salary=False  # переопределяем env
        )
    
        # Проверяем основные параметры
>       assert params["count"] == 150  # из kwargs (финальное переопределение)
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E       assert 888 == 150

tests/test_29_sj_api_config_coverage.py:326: AssertionError
========================================== short test summary info ===========================================
FAILED tests/test_29_sj_api_config_coverage.py::TestSJAPIConfigGetParams::test_get_params_complex_scenario - assert 888 == 150
======================================== 1 failed, 40 passed in 0.34s ========================================
~/workspace$ 